import React from "react";

import { CodeEditor, Language } from "@patternfly/react-code-editor";

import { LoadingWrapper } from "@app/components/LoadingWrapper";
import { useFetchVulnerabilitySourceById } from "@app/queries/vulnerabilities";

interface SourceProps {
  cveId: string;
}

export const Source: React.FC<SourceProps> = ({ cveId }) => {
  const { source, isFetching, fetchError } =
    useFetchVulnerabilitySourceById(cveId);

  return (
    <>
      <LoadingWrapper isFetching={isFetching} fetchError={fetchError}>
        <CodeEditor
          isDarkTheme
          isLineNumbersVisible
          isReadOnly
          isMinimapVisible
          code={source ?? ""}
          language={Language.json}
          height="520px"
        />
      </LoadingWrapper>
    </>
  );
};
